document.getElementById("currentYear").textContent = new Date().getFullYear();

document.addEventListener("DOMContentLoaded", function () {
  const STATE = {
    current: 0,
    answers: [],
    finished: false,
  };
  const QUESTIONS = [
    {
      id: 1,
      type: "single",
      q: "Дайте определение термину «фишинг»",
      instr: "Выберите один правильный вариант ответа",
      options: [
        {
          id: "1.1",
          text: "Вид интернет-мошенничества, цель которого — выманить личные данные у пользователя обманным путём",
          correct: true,
        },
        {
          id: "1.2",
          text: "Вид интернет-мошенничества, цель которого — исказить персональные данные пользователя",
          correct: false,
        },
        {
          id: "1.3",
          text: "Вид интернет-мошенничества, цель которого — выманить игровую валюту в играх",
          correct: false,
        },
      ],
    },
    {
      id: 2,
      type: "multiple",
      q: "Отметьте варианты ответов, которые являются методами и средствами защиты от фишинговых атак",
      instr: "Выберите несколько правильных вариантов ответа",
      options: [
        {
          id: "2.1",
          text: "Использовать сложные пароли",
          correct: true,
        },
        {
          id: "2.2",
          text: "Использовать специальные функции в смартфоне",
          correct: true,
        },
        {
          id: "2.3",
          text: "Регулярно чистить электронный почтовый ящик",
          correct: false,
        },
        {
          id: "2.4",
          text: "Хранить пароли в файле на рабочем столе ПК",
          correct: false,
        },
        {
          id: "2.5",
          text: "Следить за уровнем заряда батареи",
          correct: true,
        },
      ],
    },
    {
      id: 3,
      type: "single",
      q: "Вам на электронную почту пришло письмо со следующим содержанием: «Для проверки безопасности вашего аккаунта, пожалуйста, подтвердите ваш текущий пароль, перейдя по ссылке…». Что будете делать?",
      instr: "Выберите один правильный вариант ответа",
      options: [
        {
          id: "3.1",
          text: "Перейду по ссылке",
          correct: false,
        },
        {
          id: "3.2",
          text: "Перемещу письмо в папку «спам», отпишусь от данной рассылки",
          correct: true,
        },
        {
          id: "3.3",
          text: "Скопирую ссылку и перейду по ней с использованием функции «инкогнито»",
          correct: false,
        },
      ],
    },
    {
      id: 4,
      type: "single",
      q: "Дайте определение термину «легитимный сайт»",
      instr: "Выберите один правильный вариант ответа",
      options: [
        {
          id: "4.1",
          text: "Сайт юридических услуг",
          correct: false,
        },
        {
          id: "4.2",
          text: "Сайт государственных структур нашей страны",
          correct: false,
        },
        {
          id: "4.3",
          text: "Надёжный сайт, которому можно доверять",
          correct: true,
        },
      ],
    },
    {
      id: 5,
      type: "multiple",
      q: "Отметьте варианты ссылок только на легитимные сайты",
      instr: "Выберите два правильных варианта ответа",
      options: [
        {
          id: "5.1",
          text: "http://vvk.com/",
          correct: false,
        },
        {
          id: "5.2",
          text: "https://vk.com/",
          correct: true,
        },
        {
          id: "5.3",
          text: "https://rutube.ru/",
          correct: true,
        },
        {
          id: "5.4",
          text: "https://rutube-1ogin.ru/",
          correct: false,
        },
        {
          id: "5.5",
          text: "http://chat.pwen.ai/",
          correct: false,
        },
      ],
    },
    {
      id: 6,
      type: "multiple",
      q: "Куда следует обращаться в случае, если вы стали жертвой фишинговой атаки?",
      instr: "Выберите несколько правильных вариантов ответа",
      options: [
        {
          id: "6.1",
          text: "Отдел информационной безопасности",
          correct: true,
        },
        {
          id: "6.2",
          text: "Написать заявление в суд",
          correct: false,
        },
        {
          id: "6.3",
          text: "Министерство внутренних дел Российской Федерации (МВД РФ)",
          correct: true,
        },
        {
          id: "6.4",
          text: "Написать в поддержку сайта, на который перешли",
          correct: false,
        },
      ],
    },
    {
      id: 7,
      type: "order",
      q: "Выберите последовательность действий в случае, если вы стали жертвой фишинговой атаки",
      instr: "Расставьте варианты ответов в правильном порядке",
      options: [
        {
          id: "7.1",
          text: "Немедленное прекращение взаимодействия",
        },
        {
          id: "7.2",
          text: "Замена пароля",
        },
        {
          id: "7.3",
          text: "Проверка банковских счетов, уведомление банка",
        },
        {
          id: "7.4",
          text: "Проверка устройства на вредоносные программы",
        },
        {
          id: "7.5",
          text: "Уведомление правоохранительных органов о фишинговой атаке",
        },
        {
          id: "7.6",
          text: "Блокировка мошенников",
        },
      ],
      correctOrder: ["7.1", "7.2", "7.3", "7.4", "7.5", "7.6"],
      correctText:
        "Правильный порядок: Немедленное прекращение взаимодействия → Замена пароля → Проверка банковских счетов, уведомление банка → Проверка устройства на вредоносные программы → Уведомление правоохранительных органов о фишинговой атаке → Блокировка мошенников",
    },
    {
      id: 8,
      type: "image-multiple",
      q: "Отметьте картинки, на которых изображены легитимные письма",
      instr: "Выберите несколько правильных вариантов ответа",
      options: [
        {
          id: "8.1",
          img: "../../Images/MainPage/mts.png",
          correct: true,
        },
        {
          id: "8.2",
          img: "../../Images/MainPage/t-bank.png",
          correct: true,
        },
        {
          id: "8.3",
          img: "../../Images/MainPage/opros.png",
          correct: false,
        },
      ],
    },
  ];
  const RESULT_SVGS = {
    bad: `
      <svg id="_Эллипс_20_xA0_Изображение" data-name="Эллипс_20_xA0_Изображение" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 867.84 843.6" class="results-svg">
        <path class="FCommon2" d="M867.84,303.27c-.91-1.44-.44-3.93-.48-5.76-.22-11.13-3.79-40.14-8.62-49.69-.31-.61-.53-1.4-1.32-1.6-.82-.21-13.4,6.01-15.52,6.88-63.49,26.24-141.44,18.41-196.26-23.55-64.89-49.67-79.18-135.25-25.26-199.34,3.03-3.6,7.82-7.52,10.36-11.25,1.3-1.91-1.98-3.81-3.43-4.78-6.22-4.19-14.31-5.65-21.56-7.24-16.62-3.64-34.32-5.99-51.37-6.47-6.07-.17-12.65-.18-18.72,0-64.5,1.93-125.96,29.75-164.55,81.9-33.6,45.4-44.79,101.93-37.94,157.72,1.16,9.45,3.34,18.73,4.73,28.14-.89-.13-1.69-.48-2.61-.5-16.47-.5-34.03.8-50.36,2.97-4.23.56-8.46,1.53-12.67,2.24l-.84-.37c-1.5-5.71-2.64-11.63-3.12-17.53-2.05-25.66,5-47.88,10.29-72.23.43-1.97,4.37-5.57,1.46-6.71-2.22-.87-8.96-1.74-11.52-1.92-60.77-4.08-122.7,50.37-154.14,97.82-23.32,35.2-39.88,78.21-33.89,121.11-22.17,32.05-37.59,69.23-41.69,108.27-7.48,1.77-14.85,4.15-22.39,5.69-3.88.79-11.83.35-14.26,3.98-3.53,5.29.02,14.15,6.33,15.22,8.15,1.38,20.73-3.55,28.92-5.16-.11,14.73,1.37,29.47,4.31,43.89-18.24,26.95-6.01,63.82,25.45,72.95,1.66.48,6.66,1.06,7.47,1.65,1.23.88,5.84,7.97,7.42,9.86,7.4,8.91,15.35,17.47,24.24,24.91,3.18-.65,6.92.36,9.59,1.86,5.06,2.84,9.88,8.04,12.15,13.38.27.63.4,1.26.43,1.86,2.6,1.72,5.33,3.64,5.94,4.02,11.84,7.33,24.23,13.72,37.11,19.04,1.02.87,2.74,9.31,3.41,11.47,14.02,45.45,47.56,97.73,94.82,113.47,5.2,1.73,10.56,2.63,15.82,4.1h16.8c3.48-.91,7.11-1.24,10.41-2.79,1.91-.9,7.87-4.86,7.83-7.06-.03-1.4-5.47-4.05-6.87-5.11-24.2-18.22-26.73-60.07-12.23-85,1.87-3.21,7.24-10.95,10.82-11.74,5.67-1.24,12.44-1.62,18.38-2.74,23.71-4.49,46.77-11.84,68.88-21.36,36.38,27.85,91.13,32.23,133.43,16.32,24.02-9.04,49.99-28.48,51.59-56.4.11-2.01-.29-11.43-1.18-12.73-1.01-1.47-4.4,1.04-5.76,1.47-11.87,3.82-21.22,2.39-32.67-1.93-14.4-5.43-27.55-15.23-37.62-26.71,3.3-5.05,7.37-9.53,10.9-14.42,22.31-30.91,38.34-66.76,43.77-104.76,10.57,2.76,20.97,6.09,31.67,8.4,87.7,18.99,181.97-2.29,236.08-77.35,20.88-28.97,36.59-70.25,37.53-106.2.05-1.83-.44-4.31.48-5.76v-24.47Z"/>
        <g>
          <path class="FCommon0" d="M535.68.48c6.07-.18,12.65-.17,18.72,0,17.04.48,34.74,2.83,51.37,6.47,7.25,1.59,15.34,3.05,21.56,7.24,1.45.98,4.73,2.87,3.43,4.78-2.54,3.72-7.33,7.65-10.36,11.25-53.92,64.09-39.64,149.67,25.26,199.34,54.82,41.95,132.77,49.79,196.26,23.55,2.12-.88,14.7-7.09,15.52-6.88s1.01.98,1.32,1.6c4.83,9.55,8.4,38.56,8.62,49.69.04,1.83-.43,4.32.48,5.76v24.47c-.92,1.45-.43,3.92-.48,5.76-.94,35.95-16.65,77.23-37.53,106.2-54.11,75.06-148.37,96.34-236.08,77.35-10.7-2.32-21.1-5.64-31.67-8.4-5.43,38-21.46,73.86-43.77,104.76-3.53,4.89-7.6,9.36-10.9,14.42,10.07,11.48,23.22,21.28,37.62,26.71,11.45,4.32,20.79,5.75,32.67,1.93,1.36-.44,4.74-2.94,5.76-1.47.89,1.29,1.29,10.72,1.18,12.73-1.6,27.92-27.56,47.36-51.59,56.4-42.3,15.92-97.06,11.53-133.43-16.32-22.12,9.52-45.17,16.86-68.88,21.36-5.94,1.12-12.71,1.5-18.38,2.74-3.58.79-8.95,8.53-10.82,11.74-14.5,24.93-11.97,66.78,12.23,85,1.41,1.06,6.84,3.7,6.87,5.11.05,2.2-5.92,6.16-7.83,7.06-3.29,1.55-6.93,1.89-10.41,2.79h-16.8c-5.26-1.47-10.62-2.37-15.82-4.1-47.26-15.74-80.8-68.02-94.82-113.47-.67-2.16-2.39-10.59-3.41-11.47-12.89-5.32-25.27-11.71-37.11-19.04-1.22-.75-10.58-7.43-11.08-6.92,1.15,5.54,2.81,11.09,3.72,16.67,1.22,7.58,1.34,14.24-1.79,21.48-.98,2.26-4.48,7.94-6.99,8.36-7.11,1.21-14.55-4.14-15.53-11.29-1.98-14.43,1.72-29.57,6.29-43.05.27-.8.87-1.4,1.26-2.13l.03-1.03c-10.53-8.14-19.75-17.92-28.24-28.15-1.57-1.89-6.19-8.99-7.42-9.86-.82-.58-5.82-1.16-7.47-1.65-31.46-9.14-43.69-46-25.45-72.95-2.94-14.42-4.43-29.16-4.31-43.89-8.19,1.61-20.77,6.54-28.92,5.16-6.31-1.06-9.86-9.92-6.33-15.22,2.42-3.63,10.37-3.19,14.26-3.98,7.54-1.53,14.91-3.92,22.39-5.69,4.1-39.05,19.52-76.23,41.69-108.27-5.99-42.91,10.57-85.92,33.89-121.11,31.44-47.45,93.37-101.9,154.14-97.82,2.57.17,9.3,1.05,11.52,1.92,2.91,1.14-1.03,4.73-1.46,6.71-5.29,24.35-12.34,46.56-10.29,72.23.47,5.9,1.62,11.83,3.12,17.53l.84.37c4.21-.71,8.44-1.67,12.67-2.24,16.33-2.17,33.89-3.47,50.36-2.97.92.03,1.72.37,2.61.5-1.38-9.41-3.57-18.69-4.73-28.14-6.85-55.79,4.34-112.32,37.94-157.72C409.72,30.23,471.18,2.41,535.68.48ZM577.44,19.2c-53.09-6.63-108.5,2.89-152.51,33.96-60.04,42.39-83.81,113.23-74.95,185.03,1.29,10.42,3.59,20.69,5.78,30.93,20.04,2.27,39.76,6.5,58.95,12.56,1.52-54.45,19.89-108.2,47.8-154.47,24.34-40.36,60.5-80.9,103.07-102.34,3.34-1.68,7.38-3.02,10.65-4.7.45-.23,1.14-.25,1.19-.96ZM598.56,30.72c-26.04,6.34-50.37,22.75-69.85,40.77-54.85,50.72-94.45,132.98-96.71,208.03-.07,2.29-1.61,7.59.51,9.1,14.18,5.94,27.88,13.2,40.64,21.75,2.03,1.36,13.01,10.02,13.86,10.15.67.1.81-.29,1.05-.78,15.1-59.08,46.34-113.79,89.29-156.88-10.84-33.55-9.01-69.97,4.67-102.37,4.44-10.51,10.25-20.29,16.54-29.76ZM584.64,180.43c-.49-.47-2.03,1.26-2.41,1.67-33.83,36.13-59.54,80.57-74.04,128.01-.95,3.09-6.56,22.34-5.89,23.86,13.28,12.43,24.39,26.87,34.15,42.18,58.66-19.22,112.51-55.51,150.9-103.85.16-.67-.36-.8-.81-1.08-3.12-1.88-9.25-3.59-12.94-5.3-34.62-15.99-64.5-41.08-83.58-74.32-1.99-3.46-4.29-7.42-5.38-11.18ZM234.48,195.3v.48c.31-.16.31-.32,0-.48ZM233.76,195.79c-16.51,4.72-32.33,13.63-46.23,23.6-43.58,31.25-86.09,90.02-91.04,144.59-.84,9.27.21,17.75.6,26.81l.41.92c5.37,7.75,12.06,15.14,19.95,20.4.51.34,4.26,3.09,3.91,1.38-1.86-9.31-1.79-22.66-1.36-32.23,3-65.57,42.39-142.27,98.92-177.03,4.38-2.69,9.13-4.68,13.41-7.23.52-.31,1.32-.48,1.43-1.21ZM139.79,422.17c17.91,5.05,37.16,2.33,53.94-5.15-1.94-27.09,4.18-54.11,13.15-79.44,10.54-29.79,26.07-58.1,44.45-83.71-1.05-16.13,1.17-32.18,4.04-48.01-33.89,10.85-61.8,37.29-81.13,66.45-26.11,39.39-43.34,95.03-35.92,142.46.39,2.48.85,4.97,1.48,7.39ZM843.36,271.13c-5.36,1.15-10.54,3.48-15.84,5.03-32.62,9.58-67.81,11.52-101.37,5.85-7.22-1.22-14.38-3.3-21.49-4.43-39.98,52.64-97.2,92.53-159.86,113.51-.51.59,3.95,9.56,4.55,11.05,4.33,10.71,7.86,21.75,10.4,33.04,46.43,6.44,94.41-3.51,137.2-21.31,47.97-19.95,98.74-54.66,127.41-98.64,8.71-13.36,16.07-28.31,19-44.1ZM210.24,407.4l10.56-7.91c31.71-28.96,47.31-74.34,35.86-116.48-.2-.74-1.08-4.71-1.55-4.68-13.01,20.21-24.4,42.28-32.41,65-7.19,20.38-12.5,42.34-12.47,64.07ZM94.56,636.79c-.1.55.02.93.25,1.42.76,1.64,6.96,8.29,8.62,10.1,74.41,80.63,202.78,85.37,297.54,40.23,96.66-46.05,171.96-153.1,138.68-263.27-31.46-104.11-143.13-150.23-245.11-138.73-6.36.72-12.68,1.98-19.02,2.82,9.67,54.14-18.85,113.58-67.19,139.41-40.08,21.42-88.29,16.33-118.33-18.96-16.48,24.77-27.96,53.07-32.88,82.53.17.18,3.53-1.71,3.99-2,4.05-2.53,8.27-6.7,12.16-8.95,7.74-4.47,18.52,4.39,14.01,12.09-1.32,2.25-9.39,7.93-11.97,9.63-3.62,2.39-9.13,5.67-12.97,7.67-1.09.57-7.24,2.75-7.55,3.25-.86,12.44-.22,25.05,1.85,37.35,22.2-11.76,49.22-4.7,62.12,16.83,15.06,25.15,3.61,59.09-24.2,68.59ZM563.04,452.51c.57,10.49,1.77,20.92,1.46,31.45-.05,1.71-1.33,5.92-.03,7.19,69.87,24.62,153.21,22.35,214.05-23.09,47.31-35.33,72.35-91.41,73.02-150.13l-.51-15.14c-.72.11-.89.91-1.21,1.43-2.9,4.86-5.15,10.31-8.19,15.33-35.45,58.49-107.9,103.13-172.52,122.16-34.19,10.07-70.46,15.11-106.08,10.8ZM565.44,675.65c-19.99-.28-39.48-9.49-54.94-21.62-5.3-4.15-9.81-9.07-14.83-13.38-20.22,21-43.32,38.81-68.62,53.31-.93.53-10.25,5.2-9.92,5.67,27.3,16.36,61.68,20.19,92.64,13.69,18.77-3.94,42.87-14.34,53-31.48.51-.86,3.19-5.69,2.68-6.2ZM115.68,692.92c-1.13-.35-1.29.86-1.39,1.72-.6,5.19-1.23,10.22-1.92,15.37-.84,6.29-.5,10.48,2.84,16.02,1.63,1.12,4.2-11.14,4.21-12.24.04-6.32-3.3-14.4-3.74-20.87ZM287.52,734.2c-32.48,1.01-65.08-2.61-96-12.48,8.97,30.59,26.25,60.31,50.17,81.56,11.41,10.13,29.34,21.12,44.69,22.99.7.09,2.41.51,2.09-.64-16.9-27.16-17.18-63.9-.95-91.43Z"/>
          <path class="FCommon0" d="M58.92,640.71c1.56-.3,3.37.42,4.37,1.65,1.08,1.33,4.6,10.02,5.23,12.05,2.3,7.39,5.03,21.1,3.81,28.53-.78,4.74-4.06,16.03-9.68,16.72-6.87.83-14.29-4.26-15.14-11.27-1.74-14.25,1.09-26.4,5.56-39.58.42-1.23.15-2.62.8-3.99s3.58-3.81,5.05-4.1ZM60.01,690.52c.33.23.86-.81,1.05-1.11,5.02-7.96,1.96-21.45-.31-30.11-.19-.71-.38-1.7-1.22-1.9-.81,3.82-.51,7.84-1.01,11.71s-1.92,7.64-1.91,11.56c0,3.35,2.17,6.84,3.41,9.84Z"/>
          <path class="FCommon0" d="M238.9,646.47c1.7-.39,3.57-.06,4.73,1.31,1.68,1.99,5.26,11.74,6.03,14.6,3.01,11.17,5.48,23.56.83,34.55-1.22,2.89-4.57,8.08-7.84,8.48-6.81.82-13.84-5.01-14.67-11.75-.61-5.01-.39-18.53.63-23.39,1.41-6.72,4.41-13.67,6.01-20.39.54-.98,3.19-3.15,4.28-3.4ZM240.01,662.69c-.75,3.83-.51,7.85-1.01,11.71-.25,1.87-1.07,3.91-1.33,5.86-.79,5.78-.67,10.73,3.06,15.53.45-.36.8-.79,1.12-1.27,4.75-6.91,1.36-21.77-.54-29.54-.2-.82-.34-2.01-1.3-2.29Z"/>
          <path class="FCommon0" d="M156.84,644.09c4.13,4.14-8.21,8.33-4.15,13.99,3.62,5.03,9.36-3.78,12.51,4.77,1.87,5.06-.95,12.25,5.64,14.03,6.21,1.68,11.07-2.11,16.84,2.84,2.68,2.3,3.47,5.03,2.76,8.54-1.71,8.36-12.67-3.34-16.58-3.88-4.84-.66-9.68,5.36-14.99-.34-4.75-5.1,1.32-12.71-2.38-16.34s-10.85,2.28-16.04-.28c-4.38-2.16-4.43-6.82-2.15-10.65,1.58-2.66,4.18-4.16,6.17-6.3,2.46-2.65,4.53-7.48,8.87-7.46.66,0,3.09.69,3.48,1.08Z"/>
          <g>
            <path class="FCommon0" d="M302.69,665.77c-2.06-2.12-3.84-4.98-4.15-8.09-.47-4.68-.37-13.98.03-18.73s2.73-9,3.12-13.67c-35.25,26.93-86.25,7.48-95.44-35.61-10.23-47.96,36.66-89.15,82.56-69.58,31.09,13.26,44.95,49.8,31.77,80.87-1.71,4.04-4.35,7.68-6.18,11.54,4.42,8.76,6.93,17.85,8.51,27.53,1.47,8.98.98,19.01-4.95,26.46-4.35,5.47-10.87,3.82-15.27-.72ZM311.99,660.29c1.29-3.51,3.36-8.48,3.36-12.24,0-3.46-2.48-15.39-3.59-18.96-.22-.72-.32-1.7-1.2-1.91-.8,3.66-.54,7.52-1.02,11.22-.54,4.14-2.13,8.69-1.89,13.03.08,1.35,2.58,10.15,4.34,8.86Z"/>
            <path class="FCommon1" d="M244.67,538.52c-3.88.65-11.52,5.94-13.99,9.04-8.39,10.52-10.71,37.5,8.96,34.39,13.66-2.16,22.56-19.57,22.43-32.28-.09-9-9.69-12.46-17.41-11.16Z"/>
            <path class="FCommon1" d="M65.19,564.91c-12.66.71-25.68,24.61-15.05,34.46,8.24,7.64,22.31-2.97,25.09-11.43s1.89-23.7-10.04-23.03Z"/>
            <path class="FCommon0" d="M182.09,469c2.22-2.24,6.03-3.52,9.16-3.02,6.61,2.75,13.04,6.16,19.82,8.49,11.3,3.88,25.37,4.92,37.33,4.96,4.71.01,12.95-1.73,17.17-.42,1.86.58,3.94,5.04,4.15,6.9.79,7.14-4.76,11.13-11.25,11.7-22.32,1.98-52.37-3.61-72.4-13.5-4.42-2.18-6.98-3.97-6.57-9.31.17-2.17,1.06-4.26,2.59-5.8Z"/>
          </g>
        </g>
      </svg>
    `,
    mid: `
      <svg id="_Эллипс_20_xA0_Изображение" data-name="Эллипс_20_xA0_Изображение" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 834.96 843.6" class="results-svg">
        <path class="FCommon2" d="M502.42.31c6.37-.19,13.31-.19,19.67,0,17.33.52,35.91,3.05,52.79,6.95,6.93,1.6,13.87,2.97,19.82,7.05,1.58,1.08,4.17,2.39,2.95,4.71-51.95,49.99-58.42,126.81-12.69,183.53,52.38,64.96,150.05,81.65,225.37,49.76,3.61-1.53,9.42-5.21,12.62-6.11,1.76-.5,1.89-.25,2.65,1.22,3.98,7.68,6.84,29.03,7.85,38.21.56,5.03.99,10.01,1.02,15.06,0,1.51-.4,3.69.48,4.8v14.88c-.93,2.74-.41,6.18-.48,9.12-1.01,45.19-21.22,93.97-51.58,127.17-60.62,66.28-153.27,78.95-237.4,56.48-4.05-1.08-11.62-4.25-15.14-4.57-.55-.05-.96-.2-1.33.37-5.69,38.36-21.83,74.12-44.46,105.26-1.31,1.81-9.96,12.21-9.98,13.03-.04,1.42,6.02,7.14,7.42,8.42,16.72,15.37,41.41,27.99,64.21,20.04,1.35-.47,2.86-2.48,4.15-.58.45.66.9,3.78.99,4.77,2.81,33.08-25.9,55.2-53.97,65.02-39,13.65-88.64,10.5-123.64-12.18-1.45-.94-6.29-5.07-7.37-5.07-22.91,10.14-47,17.29-71.65,21.89-3.61.67-15.76,1.79-17.87,3.24-1.81,1.24-5.58,6.44-6.89,8.47-15.88,24.57-14.02,67.11,9.57,86.32,1.56,1.27,6.78,3.84,7.43,4.56,2.51,2.78-5.05,7.58-7.25,8.6-3.34,1.55-7.03,1.71-10.51,2.69h-16.8c-8.03-1.97-15.75-3.79-23.36-7.11-46.53-20.36-78.65-74.04-90-121.86-38.55-15.56-73.35-41.29-97.41-75.34-21.57-2.33-38.09-19.02-40.68-40.42-.15-1.27-.05-2.79-.96-3.84v-6.72c1.31-3.67,1.6-7.58,2.86-11.29.97-2.85,5.65-10.51,5.81-11.97.32-2.99-1.92-10.83-2.37-14.47-7.06-56.47,9.44-111.88,41.61-157.93-.17-3.59-1.17-7.32-1.38-10.9-4.84-82.03,75.85-182.82,153.85-203.68,15.51-4.15,32.65-5.98,48.2-1.22-.54,1.99-2.25,3.93-2.78,5.86-.26.92-.03,2.04-.33,3.03-8.35,28.12-14.62,58.22-6.98,87.31,5.67-1.02,11.38-2.1,17.1-2.81,15.13-1.88,31.75-3.01,46.98-2.49.92.03,1.72.38,2.61.5-9.18-40.7-9.71-83.61,2.16-123.8C333.34,56.33,411.96,3.03,502.42.31Z"/>
        <g>
          <path class="FCommon0" d="M502.42.31c6.37-.19,13.31-.19,19.67,0,17.33.52,35.91,3.05,52.79,6.95,6.93,1.6,13.87,2.97,19.82,7.05,1.58,1.08,4.17,2.39,2.95,4.71-51.95,49.99-58.42,126.81-12.69,183.53,52.38,64.96,150.05,81.65,225.37,49.76,3.61-1.53,9.42-5.21,12.62-6.11,1.76-.5,1.89-.25,2.65,1.22,3.98,7.68,6.84,29.03,7.85,38.21.56,5.03.99,10.01,1.02,15.06,0,1.51-.4,3.69.48,4.8v14.88c-.93,2.74-.41,6.18-.48,9.12-1.01,45.19-21.22,93.97-51.58,127.17-60.62,66.28-153.27,78.95-237.4,56.48-4.05-1.08-11.62-4.25-15.14-4.57-.55-.05-.96-.2-1.33.37-5.69,38.36-21.83,74.12-44.46,105.26-1.31,1.81-9.96,12.21-9.98,13.03-.04,1.42,6.02,7.14,7.42,8.42,16.72,15.37,41.41,27.99,64.21,20.04,1.35-.47,2.86-2.48,4.15-.58.45.66.9,3.78.99,4.77,2.81,33.08-25.9,55.2-53.97,65.02-39,13.65-88.64,10.5-123.64-12.18-1.45-.94-6.29-5.07-7.37-5.07-22.91,10.14-47,17.29-71.65,21.89-3.61.67-15.76,1.79-17.87,3.24-1.81,1.24-5.58,6.44-6.89,8.47-15.88,24.57-14.02,67.11,9.57,86.32,1.56,1.27,6.78,3.84,7.43,4.56,2.51,2.78-5.05,7.58-7.25,8.6-3.34,1.55-7.03,1.71-10.51,2.69h-16.8c-8.03-1.97-15.75-3.79-23.36-7.11-46.53-20.36-78.65-74.04-90-121.86-38.55-15.56-73.35-41.29-97.41-75.34-21.57-2.33-38.09-19.02-40.68-40.42C.81,597.43.91,595.91,0,594.86v-6.72c1.31-3.67,1.6-7.58,2.86-11.29.97-2.85,5.65-10.51,5.81-11.97.32-2.99-1.92-10.83-2.37-14.47-7.06-56.47,9.44-111.88,41.61-157.93-.17-3.59-1.17-7.32-1.38-10.9-4.84-82.03,75.85-182.82,153.85-203.68,15.51-4.15,32.65-5.98,48.2-1.22-.54,1.99-2.25,3.93-2.78,5.86-.26.92-.03,2.04-.33,3.03-8.35,28.12-14.62,58.22-6.98,87.31,5.67-1.02,11.38-2.1,17.1-2.81,15.13-1.88,31.75-3.01,46.98-2.49.92.03,1.72.38,2.61.5-9.18-40.7-9.71-83.61,2.16-123.8C333.34,56.33,411.96,3.03,502.42.31ZM544.64,19.2c-57.94-7.36-120.39,5.12-165.3,43.68-52.8,45.33-71.41,112.55-61.6,180.58.45,3.1,4.23,24.68,5.31,25.64,20.01,2.38,39.69,6.62,58.91,12.59.8-49.12,16.45-98.12,39.75-140.92,24.88-45.71,60.79-88.06,106.6-113.66l16.32-7.9ZM565.28,30.71c-16.88,4-33.07,12.7-47.18,22.64-44.45,31.33-80.01,83.8-99.54,134.15-12.37,31.91-20.24,66.13-19.81,100.57,19.53,8.6,38.4,18.96,55.03,32.4l1.12.07c14.88-59.1,46.07-114.34,89.18-157.26.41-1.42-2.08-8.13-2.56-10.21-8.61-36.71-3.84-73.32,14.08-106.38l9.68-15.99ZM502.97,376.15c59.14-19.04,113.04-55.57,151.55-104.31-44.08-16.72-83.08-48.32-103.4-91.4-29.96,30.73-53.39,68.7-68.74,108.8-4.74,12.37-9.61,26.59-12.27,39.56-.23,1.1-.86,3.07-.83,4.02.05,1.75,5.9,6.64,7.47,8.36,9.81,10.76,18.99,22.3,26.22,34.97ZM203.46,194.83c-5.39,1.15-11.08,3.45-16.16,5.67-55.85,24.42-109.09,88.85-121.41,148.75-2.92,14.18-3.19,27.7-1.49,41.97.55,2.67,11.67,14.16,14.29,16.43,1.62,1.4,7.22,5.82,8.89,6.47.96.37.73-.62.73-1.21-.03-4.97-1.32-11.11-1.48-16.28-2.18-70.67,39.13-156.08,100.16-193.07l16.46-8.72ZM222.65,205.86c-35.35,11.11-64.19,39.4-83.69,70.1-24.44,38.47-40.24,91.11-33.8,136.89.25,1.77,1.1,8.65,2.12,9.39.84.61,4.15,1.09,5.4,1.32,15.95,2.99,33.23.19,47.84-6.56.16-5.05-.46-10.07-.27-15.15,1.93-52.13,28.78-105.95,57.97-147.89-.21-16.18.72-32.36,4.43-48.11ZM511.53,391.09c6.18,13.99,11.73,28.31,14.97,43.33l.71.73c46.64,6.5,94.96-3.75,137.87-21.77,48.45-20.35,100.3-56.36,128.34-101.52,7.83-12.61,14.21-26.59,17.07-41.23-43.96,17.09-93.31,18.72-138.83,6.77-39.95,52.77-97.33,92.87-160.12,113.68ZM222.65,278.32c-.77-.74-.83.28-1.06.62-4.44,6.48-8.89,14.48-12.62,21.44-17.5,32.66-30.85,69.57-31.9,107.02.47.51,5.25-3.27,5.98-3.85,30.5-24.13,47.99-65.47,43.91-104.35-.25-2.36-3.55-20.14-4.32-20.88ZM61.42,636.78c-.36.39.93,1.9,1.25,2.35,12.93,18.21,40.53,38.64,60.16,49.24,123.01,66.43,292.2,13.96,361.91-105.02,61.43-104.85,24.82-225.83-85.17-276.33-42.46-19.49-91.38-25.74-137.75-20.49-6.35.72-12.67,1.95-18.99,2.84,2.6,18.96,1.93,37.72-3.04,56.22-10.59,39.39-39.83,75.15-78.44,89.51-36.9,13.72-78.28,5.52-103.73-25l-.99-.3c-26.52,41.82-40.64,91.81-33.12,141.56,3.15-.7,5.92-2.61,9.11-3.61,38.72-12.03,71.87,27.9,55.75,64.39-4.88,11.04-15.24,21.2-26.96,24.63ZM531.26,491.33c81.73,28.36,179.15,20.13,239.65-46.49,33.14-36.5,50.4-90.19,47.28-139.43-.06-.93-.25-1.74-.51-2.61l-10.35,18.67c-28.89,46.26-80.94,83.58-130.4,105.22-45.73,20.01-97.01,31.64-147.16,25.83,1.8,12.87,1.41,25.84,1.49,38.82ZM463.49,640.68c-1.61-.94-6.2,6.32-7.84,7.14-21.18,20.48-45.35,37.56-71.26,51.57,28.65,18.15,67.93,21.01,100.28,12,18.92-5.27,40.37-16.59,47.98-35.75-26.16-.43-50.69-15.25-68.41-33.59-.38-.39-.67-1.33-.75-1.38ZM254.32,734.19c-24.57.72-49.06-1.13-73.03-6.39-7.56-1.66-14.89-4.04-22.46-5.61,11.26,38.57,39.1,82.23,77.08,98.78,6,2.61,13.31,5.26,19.84,5.11-15.53-24.63-17.16-57.56-5.36-84.06,1.19-2.67,2.88-5.11,3.92-7.83Z"/>
          <path class="FCommon0" d="M225.92,515.52c49.81-4.39,83.03,48.27,58.54,91.65s-87.45,39.57-107.32-5.73c-16.3-37.15,7.83-82.32,48.78-85.92Z"/>
          <path class="FCommon0" d="M123.65,667.64c-3.48-3.8-14.35,4.52-18.78-2.57-3.83-6.14,4.01-11.92,7.66-15.81,2.29-2.44,3.22-5.79,7.33-6.14,2.08-.18,5.2.83,4.82,3.38-.65,4.39-8.41,5.95-4.94,11.37s8.89-3.55,12.45,4.82c2.42,5.69-1.17,12.44,6.37,14.27,5.97,1.45,10.33-2.15,16.19,2.52,2.21,1.76,3.45,5.01,3.01,7.8-1.64,10.38-12.72-2.59-16.97-2.99-4.87-.47-7.28,4.6-13.31.88-7.61-4.7-.05-13.39-3.83-17.53Z"/>
        </g>
        <path class="FCommon1" d="M211.49,538.52c-14.69,2.48-23.55,23.31-18.61,36.62,4.98,13.44,22.37,5.02,28.8-2.91,4.78-5.89,10.05-21.86,5.5-28.51-3.48-5.08-9.95-6.16-15.69-5.2Z"/>
        <path class="FCommon1" d="M40.14,567.85c-8.67-8.61-21.38,3.84-24.87,11.97-2.89,6.72-3.23,16.54,3.77,20.89,7.93,4.93,20.4-4.78,23.09-12.27,1.86-5.17,2.19-16.44-1.98-20.59Z"/>
      </svg>
    `,
    good: `
      <svg id="_весёли_xA0_Изображение" data-name="весёли_xA0_Изображение" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 882.48 843.6" class="results-svg">
        <path class="FCommon2" d="M569.13.48c17.53.5,36.19,3.01,53.27,6.95,6.93,1.6,13.87,2.97,19.82,7.05,1.58,1.08,4.17,2.39,2.95,4.71-51.95,49.99-58.43,126.81-12.69,183.53,52.39,64.96,150.06,81.65,225.37,49.76,3.61-1.53,9.42-5.21,12.62-6.11,1.76-.5,1.89-.25,2.65,1.22,3.98,7.68,6.84,29.03,7.85,38.21.56,5.03.99,10.01,1.02,15.06,0,1.51-.4,3.69.48,4.8v15.36c-.93,2.57-.42,5.87-.48,8.64-.99,45.16-21.24,93.99-51.58,127.17-60.62,66.28-153.28,78.95-237.41,56.48-4.05-1.08-11.62-4.25-15.14-4.57-.55-.05-.96-.2-1.33.37-5.69,38.36-21.83,74.12-44.46,105.26-1.31,1.81-9.96,12.21-9.98,13.03-.04,1.42,6.02,7.14,7.42,8.42,16.72,15.37,41.41,27.99,64.21,20.04,1.35-.47,2.86-2.48,4.15-.58.45.66.9,3.78.99,4.77,2.81,33.08-25.9,55.2-53.97,65.02-39,13.65-88.64,10.5-123.64-12.18-1.45-.94-6.29-5.07-7.37-5.07-22.91,10.14-47,17.29-71.65,21.89-3.61.67-15.76,1.79-17.87,3.24-1.81,1.24-5.58,6.44-6.89,8.47-15.88,24.57-14.02,67.11,9.57,86.32,1.56,1.27,6.78,3.84,7.43,4.56,2.51,2.78-5.05,7.58-7.25,8.6-3.34,1.55-7.03,1.71-10.51,2.69h-16.8c-7.97-1.99-15.8-3.81-23.36-7.11-46.54-20.36-78.63-74.04-90-121.86-8.32-3.33-16.43-7.22-24.37-11.38-1.95-1.02-6.97-4.6-8.5-4.98-.84-.21-4,2.72-4.93,3.52-11.18,9.75-21.4,20.48-32.62,30.25-5.21,4.54-14.22,10.48-18.49,15.11-1.12,1.21-1.68,3-2.87,4.33-9.59,10.76-24.33,14.08-37.95,9.13-1.67-.61-3.27-1.97-4.15-3.52-4.75-8.41-6.07-16.27-2.06-25.3,2.23-5.02,4.69-7.16,9.93-8.78,9.73-3.01,21.38-2.03,28.47,5.89.97,1.09,1.85,4.15,3.6,3.67.69-.19,8.31-6.65,9.59-7.73,6.66-5.63,12.82-11.87,19.67-17.28l18.21-17.73c-19.3-14.27-37.23-30.74-50.95-50.55-35.65-3.78-52.63-44.99-32.97-74.24-2.85-15.93-4.51-32.01-3.88-48.23-1,1.16-2.61,2.37-3.55,3.4-2.61,2.87-4.83,7.21-8.59,8.69-7.76,3.06-15.33-3.07-14.21-11.33.45-3.33,6.33-9.65,8.83-12.28,5.98-6.3,12.77-11.3,20.16-15.83,6.05-34.71,20.2-67.7,40.35-96.43-3.17-21.3-.46-42.52,5.51-63.12l-61-164.35-30.08,13.79c-7.62,1.59-12.13-7.45-6.26-12.49l29.16-13.31-.45-1.71-24.28-20.35c-5.31-6.2,2.14-15.15,9.61-10.09,5.21,3.53,10.76,9.37,15.85,13.42.46.37,3.27,2.77,3.58,2.41l-2.39-27.59c-.1-3.83-.6-7.56,3.19-9.76,4.53-2.64,9.71-.02,10.69,5.01l3.42,42.89,148.75,42,10.31,3.58c25.82-13.63,55.71-24.42,85.18-16.77.34.46-2.46,4.99-2.77,6.11-.26.92-.03,2.04-.33,3.03-8.36,28.12-14.63,58.21-6.98,87.31,5.67-.99,11.38-2.1,17.1-2.81,14.88-1.86,31.53-3.03,46.5-2.49,1.08.04,2.03.49,3.09.5-15.7-67.16-5.24-140.27,39.36-194.09C436.08,21.04,501.01-1.47,569.13.48Z"/>
        <path class="FCommon0" d="M569.13.48c17.53.5,36.19,3.01,53.27,6.95,6.93,1.6,13.87,2.97,19.82,7.05,1.58,1.08,4.17,2.39,2.95,4.71-51.95,49.99-58.43,126.81-12.69,183.53,52.39,64.96,150.06,81.65,225.37,49.76,3.61-1.53,9.42-5.21,12.62-6.11,1.76-.5,1.89-.25,2.65,1.22,3.98,7.68,6.84,29.03,7.85,38.21.56,5.03.99,10.01,1.02,15.06,0,1.51-.4,3.69.48,4.8v15.36c-.93,2.57-.42,5.87-.48,8.64-.99,45.16-21.24,93.99-51.58,127.17-60.62,66.28-153.28,78.95-237.41,56.48-4.05-1.08-11.62-4.25-15.14-4.57-.55-.05-.96-.2-1.33.37-5.69,38.36-21.83,74.12-44.46,105.26-1.31,1.81-9.96,12.21-9.98,13.03-.04,1.42,6.02,7.14,7.42,8.42,16.72,15.37,41.41,27.99,64.21,20.04,1.35-.47,2.86-2.48,4.15-.58.45.66.9,3.78.99,4.77,2.81,33.08-25.9,55.2-53.97,65.02-39,13.65-88.64,10.5-123.64-12.18-1.45-.94-6.29-5.07-7.37-5.07-22.91,10.14-47,17.29-71.65,21.89-3.61.67-15.76,1.79-17.87,3.24-1.81,1.24-5.58,6.44-6.89,8.47-15.88,24.57-14.02,67.11,9.57,86.32,1.56,1.27,6.78,3.84,7.43,4.56,2.51,2.78-5.05,7.58-7.25,8.6-3.34,1.55-7.03,1.71-10.51,2.69h-16.8c-7.97-1.99-15.8-3.81-23.36-7.11-46.54-20.36-78.63-74.04-90-121.86-8.32-3.33-16.43-7.22-24.37-11.38-1.95-1.02-6.97-4.6-8.5-4.98-.84-.21-4,2.72-4.93,3.52-11.18,9.75-21.4,20.48-32.62,30.25-5.21,4.54-14.22,10.48-18.49,15.11-1.12,1.21-1.68,3-2.87,4.33-9.59,10.76-24.33,14.08-37.95,9.13-1.67-.61-3.27-1.97-4.15-3.52-4.75-8.41-6.07-16.27-2.06-25.3,2.23-5.02,4.69-7.16,9.93-8.78,9.73-3.01,21.38-2.03,28.47,5.89.97,1.09,1.85,4.15,3.6,3.67.69-.19,8.31-6.65,9.59-7.73,6.66-5.63,12.82-11.87,19.67-17.28l18.21-17.73c-19.3-14.27-37.23-30.74-50.95-50.55-35.65-3.78-52.63-44.99-32.97-74.24-2.85-15.93-4.51-32.01-3.88-48.23-1,1.16-2.61,2.37-3.55,3.4-2.61,2.87-4.83,7.21-8.59,8.69-7.76,3.06-15.33-3.07-14.21-11.33.45-3.33,6.33-9.65,8.83-12.28,5.98-6.3,12.77-11.3,20.16-15.83,6.05-34.71,20.2-67.7,40.35-96.43-3.17-21.3-.46-42.52,5.51-63.12l-61-164.35-30.08,13.79c-7.62,1.59-12.13-7.45-6.26-12.49l29.16-13.31-.45-1.71-24.28-20.35c-5.31-6.2,2.14-15.15,9.61-10.09,5.21,3.53,10.76,9.37,15.85,13.42.46.37,3.27,2.77,3.58,2.41l-2.39-27.59c-.1-3.83-.6-7.56,3.19-9.76,4.53-2.64,9.71-.02,10.69,5.01l3.42,42.89,148.75,42,10.31,3.58c25.82-13.63,55.71-24.42,85.18-16.77.34.46-2.46,4.99-2.77,6.11-.26.92-.03,2.04-.33,3.03-8.36,28.12-14.63,58.21-6.98,87.31,5.67-.99,11.38-2.1,17.1-2.81,14.88-1.86,31.53-3.03,46.5-2.49,1.08.04,2.03.49,3.09.5-15.7-67.16-5.24-140.27,39.36-194.09C436.08,21.04,501.01-1.47,569.13.48ZM592.16,19.2c-57.94-7.36-120.4,5.12-165.3,43.68-52.8,45.33-71.41,112.55-61.6,180.58.45,3.1,4.23,24.68,5.31,25.64,20.01,2.38,39.69,6.62,58.91,12.59.53-41.02,11.78-81.8,28.71-118.85,23.99-52.51,66.02-108.12,117.64-135.73l16.32-7.9ZM612.79,30.71c-16.87,4.05-33.07,12.69-47.18,22.64-44.44,31.32-80.02,83.81-99.54,134.15-12.38,31.91-20.25,66.13-19.81,100.57,19.51,8.63,38.44,18.91,55.03,32.4l1.12.07c14.88-59.1,46.06-114.36,89.18-157.26.41-1.42-2.08-8.13-2.56-10.21-8.61-36.71-3.84-73.32,14.08-106.38l9.68-15.99ZM90.2,172.77l-36.45-10.09,15.6,42.22c.64.14,1.07-.56,1.4-.99,6.91-8.88,12.1-20.34,19.21-29.26l.24-1.88ZM117.04,180.47l-11.8-3.31-.89.34-28.33,43.22c-.44,1.36,2.09,9.43,2.93,10.56,1.43,1.91,5.31.49,6.61,5.86,1.03,4.27-1.66,5.29-1.59,7.29.03.86,3.54,10.24,4.08,10.37l52.97-66.54c.12-.82-.81-1.15-1.38-1.37-1-.39-8.25-2.32-8.81-2.18-3.95,8.93-15.33,5.42-13.8-4.24ZM550.49,376.15c59.14-19.04,113.04-55.57,151.55-104.31-44.08-16.72-83.08-48.32-103.4-91.4-29.96,30.73-53.39,68.7-68.74,108.8-4.74,12.37-9.61,26.59-12.27,39.56-.23,1.1-.86,3.07-.83,4.02.05,1.75,5.9,6.64,7.47,8.36,9.81,10.76,18.99,22.3,26.22,34.97ZM188.11,200.59l-32.56-8.57c-.27.6-.36,1.3-.8,1.83-20.43,24.55-40.31,50.22-59.8,75.55-.35.45-.8.67-1.32.84l11.95,32.56,82.53-102.21ZM250.97,194.83c-9.35,2.47-19.35,6.51-27.84,11.26-1.28.72-4.64,2.39-5.46,3.18-1.47,1.43-1.34,5.58-2.21,7.62l20-13.82,15.5-8.24ZM270.16,205.86c-35.24,11.06-63.99,39.26-83.51,69.81-24.57,38.47-40.44,91.33-33.99,137.18.25,1.77,1.1,8.65,2.12,9.39.84.61,4.15,1.09,5.4,1.32,15.95,2.99,33.23.19,47.84-6.56.16-5.05-.46-10.07-.27-15.15,1.93-52.13,28.76-105.96,57.97-147.89-.21-16.18.72-32.36,4.43-48.11ZM195.68,223.99c.57-.57,4.9-14.61,4.42-15.25l-81.09,99.81c.81.17,1.39-.24,2.08-.56,1.86-.88,14.33-8.36,14.63-9.36.84-2.84-.5-4.59,3.28-6.8,3.15-1.84,4.12-.37,6.65-.51,1.19-.06,6.83-5.06,8.16-6.27,3.78-3.41,9.81-9.13,12.95-12.96.48-.58,1.67-1.98,1.69-2.63-9.28-5.82.25-18,8.46-10.85l.65-.17c2.11-3.62,13.25-19.46,12.95-22.55-.09-.96-1.28-2.12-1.44-3.87-.22-2.44.41-4.7,2.43-6.21,1.15-.86,3.67-1.31,4.18-1.82ZM559.05,391.09c6.18,13.99,11.73,28.31,14.97,43.33l.71.73c46.64,6.5,94.96-3.75,137.87-21.77,48.45-20.35,100.3-56.36,128.34-101.52,7.83-12.61,14.21-26.59,17.07-41.23-43.96,17.09-93.31,18.72-138.83,6.77-39.95,52.77-97.33,92.87-160.12,113.68ZM270.16,278.32c-1.14-.26-.77.2-1.07.63-4.44,6.44-8.9,14.5-12.62,21.44-17.5,32.66-30.85,69.57-31.9,107.02.47.51,5.25-3.27,5.98-3.85,36.34-28.74,53.52-80.53,39.6-125.23ZM180.43,664.13c-.62,1.78.65,3.39.82,4.62.29,2.15-.98,3.39,1.39,5.89,5.9,6.24,16.24-1.51,21.41,6.91,1.55,2.53,1.93,8.38-1.08,9.71-3.31,1.47-11.19-6.64-14.66-6.97-4.09-.39-7.1,3.51-12.39,1.39-1.51-.61-2.45-2.49-3.85-2.37l-4.58,3.14c120.79,68.03,287.77,18.92,360.57-96.25,67.88-107.38,30.9-234.45-85.29-285.08-42.43-18.49-91.43-23.98-137.26-18.08-5.07.65-10.1,1.66-15.16,2.36,2.6,18.96,1.93,37.73-3.04,56.22-10.62,39.5-39.98,75.35-78.79,89.64-36.81,13.55-78.03,5.27-103.38-25.13l-.99-.3c-13.25,21.54-24.16,44.75-29.76,69.57,2.92-1,5.74-2.54,8.64-3.59,9.06-3.28,19.93-6.44,29.48-6.03,5.46.24,10.5,1.46,14.9,4.82,8.42,6.43,2.57,19.84-7.55,18.59-2.76-.34-4.79-2.5-6.82-2.78-7.31-1-18.63,2.98-25.55,5.69-2.11.83-16.68,7.38-17.19,8.24-2.23,15.6-1.25,31.47.72,47.03,5.29-1.95,9.95-4.27,15.73-5.15,38.55-5.88,65.94,35.62,47.38,69.46-5.84,10.65-13.73,16.26-24.54,21.06-.32.14-1-.14-.66.75.45,1.17,5.7,7.04,6.94,8.41,8.14,8.96,18.41,18.4,28.12,25.62,1.75,1.3,7.52,5.83,9.07,6.33.51.17.93.32,1.42-.04,4.57-3.21,8.94-6.96,13.76-9.78.65-.38,1.35-.56,2.1-.55-2.27-2.42-6.5.13-9.42.43-5.88.59-10.3-1.72-9.27-8.31.52-3.29,6.03-7.87,8.37-10.34,1.58-1.66,2.44-3.88,4.53-5.07,3.35-1.92,8.96-1.21,6.98,3.62-1.52,3.72-7.46,5.13-4.3,10.06,1.68,2.62,3.64,1.37,5.49,2.19,2.05.91,3.59,5.56,7.69,4.07ZM578.77,491.33c81.71,28.35,179.15,20.14,239.65-46.49,33.14-36.5,50.4-90.19,47.28-139.43-.06-.93-.25-1.74-.51-2.61l-10.35,18.67c-28.9,46.27-80.92,83.57-130.4,105.22-45.73,20.01-97.02,31.65-147.16,25.83,1.8,12.87,1.41,25.84,1.49,38.82ZM150.68,309.51l-15.51,9.68-15.42,8.1c-5.84,16.51-9.88,34.41-8.92,52.07.21,3.95,1.48,8,1.08,11.86.54,2.63,11.47,13.97,14.05,16.2,1.48,1.28,7.72,6.16,9.14,6.7.96.36.73-.62.73-1.21-.03-4.82-1.29-10.8-1.45-15.83-.38-11.76.74-24.76,2.47-36.38,2.62-17.55,7.57-34.64,13.83-51.18ZM511,640.68c-.56-.33-1.19.05-1.65.38-1.62,1.14-4.07,5.48-6.19,6.76-21.18,20.48-45.35,37.56-71.26,51.57,28.54,18.09,68.07,21.04,100.28,12,18.96-5.32,40.35-16.56,47.99-35.75-26.16-.41-50.7-15.26-68.41-33.59-.38-.39-.67-1.33-.75-1.38ZM301.84,734.19c-24.57.74-49.06-1.13-73.03-6.39-7.56-1.66-14.9-4-22.46-5.61,11.28,38.57,39.1,82.24,77.09,98.78,6,2.61,13.31,5.26,19.84,5.11-14.8-23.44-16.98-54.64-6.95-80.37,1.55-3.98,3.76-7.64,5.51-11.52ZM80.62,741.87c-.77,4.43,5.84,4.72,7.44.96,4-9.43-11.57-15.51-14.86-5.74-1.62,4.82-.93,7.45,2.16,11.25,2.41,2.97,6.2,5.55,10.26,5.04,1.73-.21,6.72-4.11,4.62-5.54-1.76-1.2-2.97,1.68-4.68,2.08-3.08.71-5.11-.64-7.1-2.77-2.78-2.97-3.71-5.1-2.4-9.13,1.91-5.88,12.25-1.58,8.86,4.31l-4.3-.47Z"/>
        <g>
          <path class="FCommon0" d="M273.43,515.52c51.15-4.53,84.46,51.29,56.92,94.35-25.95,40.59-86.4,35.56-105.7-8.43-16.3-37.15,7.83-82.29,48.78-85.92Z"/>
          <path class="FCommon1" d="M259,538.52c-14.69,2.48-23.55,23.31-18.61,36.62s22.37,5.02,28.8-2.91c4.78-5.89,10.05-21.86,5.5-28.51-3.48-5.08-9.95-6.16-15.69-5.2Z"/>
          <path class="FCommon1" d="M87.64,567.85c-8.67-8.61-21.38,3.84-24.87,11.97-2.89,6.72-3.23,16.54,3.77,20.89,7.97,4.95,20.35-4.81,23.09-12.27,1.88-5.13,2.17-16.47-1.98-20.59Z"/>
          <path class="FCommon0" d="M243.67,449.76l12.31.87c14.96,3.38,30.65,6.23,43.44,15.11,2.16,1.5,8.34,6.15,9.83,7.93,7.69,9.17-4.01,22.06-14.09,15.05-5.94-4.13-9.48-8.27-16.74-11.09-14.32-5.58-37.3-10.04-52.04-4.84-1.6.57-3.39,2.01-4.94,2.25-12.8,2.02-17.91-13.55-6.64-19.59,8.9-4.77,19.02-4.86,28.87-5.68Z"/>
        </g>
        <g>
          <path class="FCommon0" d="M136.63,231.88c9.18-1.89,11.59,12.05,3.62,13.7-10.58,2.2-12.09-11.96-3.62-13.7Z"/>
          <path class="FCommon0" d="M163.03,204.54c10.35-1.91,11.76,12.32,3.13,13.69-9.7,1.53-10.91-12.26-3.13-13.69Z"/>
          <path class="FCommon0" d="M112.16,265.48c10.2-1.89,11.76,12.33,3.13,13.69-9.67,1.53-11.07-12.22-3.13-13.69Z"/>
          <path class="FCommon0" d="M101.12,201.17c11.61-2.41,11.61,15.14.89,13.77-7.67-.98-7.88-12.32-.89-13.77Z"/>
          <path class="FCommon0" d="M68.49,172.86c11.44-2.37,11.43,14,1.86,13.76-8.1-.2-9.19-12.24-1.86-13.76Z"/>
        </g>
      </svg>
    `,
  };
  function randomizeQuestions() {
    QUESTIONS.forEach((q) => {
      if (q.options) {
        q.options = shuffleArray(q.options);
      }
      if (q.type === "order" && q.correctOrder) {
      }
    });
  }
  function makePlaceholderImage(bg, label) {
    const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='480' height='320'>
      <rect width='100%' height='100%' fill='${bg}' rx='12'/>
      <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='22' font-family='Arial' fill='#0f1724'>${label}</text>
    </svg>`;
    return "data:image/svg+xml;utf8," + encodeURIComponent(svg);
  }
  let state = {
    currentIndex: 0,
    answers: Array(QUESTIONS.length).fill(null),
    checkedAttempts: Array(QUESTIONS.length).fill(0),
    finished: false,
    forcedCountSkipped: false,
  };
  for (let i = 0; i < QUESTIONS.length; i++) {
    state.answers[i] = {
      selected: [],
      checked: false,
      skipped: false,
      correct: false,
      savedOrder: null,
      orderAnswerText: null,
    };
  }
  const openBtn = document.getElementById("openTest");
  const modalRoot = document.getElementById("modalRoot");
  const pageRoot = document.getElementById("pageRoot");
  const closeModal = document.getElementById("closeModal");
  const backdrop = document.getElementById("backdrop");
  const overlay = document.getElementById("overlay");
  const questionArea = document.getElementById("questionArea");
  const progressInfo = document.getElementById("progressInfo");
  const progressBar = document.getElementById("progressBar");
  const btnBack = document.getElementById("btnBack");
  const btnSkip = document.getElementById("btnSkip");
  const btnCheck = document.getElementById("btnCheck");
  const btnNext = document.getElementById("btnNext");
  const warnRoot = document.getElementById("warnRoot");
  let pageScrollY = 0;
  function lockPageScroll() {
    pageScrollY = window.scrollY;
    document.body.style.position = "fixed";
    document.body.style.top = `-${pageScrollY}px`;
    document.body.style.left = "0";
    document.body.style.right = "0";
    document.body.style.width = "100%";
  }
  function unlockPageScroll() {
    document.body.style.position = "";
    document.body.style.top = "";
    document.body.style.left = "";
    document.body.style.right = "";
    document.body.style.width = "";
    window.scrollTo(0, pageScrollY);
  }
  openBtn.addEventListener("click", openTest);
  closeModal.addEventListener("click", closeTest);
  overlay.addEventListener("click", () => closeTest());
  overlay.addEventListener(
    "wheel",
    (e) => {
      e.preventDefault();
    },
    { passive: false }
  );
  overlay.addEventListener(
    "touchmove",
    (e) => {
      e.preventDefault();
    },
    { passive: false }
  );
  btnBack.addEventListener("click", onBack);
  btnSkip.addEventListener("click", onSkip);
  btnCheck.addEventListener("click", onCheck);
  btnNext.addEventListener("click", onNext);
  function openTest() {
    modalRoot.style.display = "block";
    pageRoot.classList.add("blurred");
    lockPageScroll();
    if (state.finished) {
      renderResultScreen();
    } else {
      renderCurrent();
    }
  }
  function closeTest() {
    modalRoot.style.display = "none";
    pageRoot.classList.remove("blurred");
    unlockPageScroll();
  }
  function renderCurrent() {
    const i = state.currentIndex;
    const q = QUESTIONS[i];
    progressInfo.textContent = `Вопрос: ${i + 1} из ${QUESTIONS.length}`;
    const pct = Math.round((i / QUESTIONS.length) * 100);
    const doneCount = state.answers.filter((a) => a.checked).length;
    const pct2 = Math.round((doneCount / QUESTIONS.length) * 100);
    progressBar.style.width = pct2 + "%";
    btnBack.classList.toggle("disabled", i === 0);
    btnBack.disabled = i === 0;
    btnSkip.style.display = i === QUESTIONS.length - 1 ? "none" : "";
    if (state.answers[i].checked) {
      btnCheck.style.display = "none";
      btnNext.style.display = "";
      btnNext.textContent =
        i === QUESTIONS.length - 1 ? "Перейти к результатам" : "Далее";
    } else {
      btnCheck.style.display = "";
      btnNext.style.display = "none";
      btnCheck.textContent = "Проверить";
      btnCheck.classList.remove("disabled");
    }
    questionArea.innerHTML = "";
    const title = document.createElement("div");
    title.className = "q-title";
    title.textContent = q.q;
    const instr = document.createElement("div");
    instr.className = "q-instruction";
    instr.textContent = q.instr;
    questionArea.appendChild(title);
    questionArea.appendChild(instr);
    if (q.type === "single" || q.type === "multiple") {
      const list = document.createElement("div");
      list.className = "options";
      q.options.forEach((opt) => {
        const el = document.createElement("div");
        el.className = "option";
        el.dataset.id = opt.id;
        if (state.answers[i].checked) el.classList.add("disabled");
        if (state.answers[i].selected.includes(opt.id))
          el.classList.add("selected");
        if (state.answers[i].checked) {
          if (opt.correct && state.answers[i].correct) {
          }
          if (opt.correct) el.classList.add("correct");
          if (state.answers[i].selected.includes(opt.id) && !opt.correct)
            el.classList.add("incorrect");
        }
        const txt = document.createElement("div");
        txt.innerHTML = opt.text;
        el.appendChild(txt);
        if (!state.answers[i].checked) {
          el.addEventListener("click", () => {
            if (q.type === "single") {
              state.answers[i].selected = [opt.id];
            } else {
              const idx = state.answers[i].selected.indexOf(opt.id);
              if (idx >= 0) state.answers[i].selected.splice(idx, 1);
              else state.answers[i].selected.push(opt.id);
            }
            renderCurrent();
          });
        }
        list.appendChild(el);
      });
      questionArea.appendChild(list);
    } else if (q.type === "image-multiple") {
      const wrap = document.createElement("div");
      wrap.className = "options options--images";
      q.options.forEach((opt) => {
        const el = document.createElement("div");
        el.className = "option";
        el.style.alignItems = "center";
        el.dataset.id = opt.id;
        if (state.answers[i].checked) el.classList.add("disabled");
        if (state.answers[i].selected.includes(opt.id))
          el.classList.add("selected");
        if (state.answers[i].checked) {
          if (opt.correct) el.classList.add("correct");
          if (state.answers[i].selected.includes(opt.id) && !opt.correct)
            el.classList.add("incorrect");
        }
        const img = document.createElement("img");
        img.className = "choice-img";
        img.src = opt.img;
        img.alt = "Вариант";
        el.appendChild(img);
        el.addEventListener("click", () => {
          if (state.answers[i].checked) return;
          const idx = state.answers[i].selected.indexOf(opt.id);
          if (idx >= 0) state.answers[i].selected.splice(idx, 1);
          else state.answers[i].selected.push(opt.id);
          renderCurrent();
        });
        wrap.appendChild(el);
      });
      questionArea.appendChild(wrap);
    } else if (q.type === "order") {
      const container = document.createElement("div");
      container.className = "order-container";
      const orderBox = document.createElement("div");
      orderBox.className = "order-list";
      let currentOrder = state.answers[i].savedOrder
        ? Array.from(state.answers[i].savedOrder)
        : shuffleArray(q.options.map((o) => o.id));
      state.answers[i].selected = Array.from(currentOrder);
      currentOrder.forEach((id) => {
        const opt = q.options.find((x) => x.id === id);
        const item = document.createElement("div");
        item.className = "order-item";
        item.draggable = !state.answers[i].checked;
        item.dataset.id = id;
        item.innerHTML = `<div class="num">≡</div><div style="flex:1">${opt.text}</div>`;
        orderBox.appendChild(item);
      });
      container.appendChild(orderBox);
      questionArea.appendChild(container);
      if (!state.answers[i].checked) {
        orderBox.querySelectorAll(".order-item").forEach((it) => {
          it.style.touchAction = "none";
          it.style.userSelect = "none";
        });
        let draggingEl = null;
        let ghostEl = null;
        let pointerId = null;
        let startY = 0;
        let offsetY = 0;
        let placeholder = null;
        function onPointerDown(e) {
          if (e.pointerType === "mouse" && e.button !== 0) return;
          draggingEl = e.currentTarget;
          pointerId = e.pointerId;
          const rect = draggingEl.getBoundingClientRect();
          startY = e.clientY;
          offsetY = e.clientY - rect.top;
          ghostEl = draggingEl.cloneNode(true);
          ghostEl.classList.add("dragging");
          ghostEl.style.position = "fixed";
          ghostEl.style.left = rect.left + "px";
          ghostEl.style.top = rect.top + "px";
          ghostEl.style.width = rect.width + "px";
          ghostEl.style.pointerEvents = "none";
          ghostEl.style.zIndex = 9999;
          document.body.appendChild(ghostEl);
          placeholder = document.createElement("div");
          placeholder.className = "order-placeholder";
          placeholder.style.height = rect.height + "px";
          draggingEl.parentNode.insertBefore(
            placeholder,
            draggingEl.nextSibling
          );
          draggingEl.style.opacity = "0";
          draggingEl.style.position = "absolute";
          draggingEl.style.pointerEvents = "none";
          draggingEl.style.top = rect.top + "px";
          draggingEl.style.left = rect.left + "px";
          draggingEl.style.width = rect.width + "px";
          draggingEl.setPointerCapture(pointerId);
          window.addEventListener("pointermove", onPointerMove);
          window.addEventListener("pointerup", onPointerUp);
          e.preventDefault();
        }
        function onPointerMove(e) {
          if (!ghostEl) return;
          const y = e.clientY;
          ghostEl.style.top = y - offsetY + "px";
          const items = Array.from(
            orderBox.querySelectorAll(".order-item")
          ).filter((el) => el !== draggingEl);
          let after = null;
          for (let el of items) {
            const rect = el.getBoundingClientRect();
            const middle = rect.top + rect.height / 2;
            if (y < middle) {
              after = el;
              break;
            }
          }
          if (after) {
            orderBox.insertBefore(placeholder, after);
          } else {
            orderBox.appendChild(placeholder);
          }
        }
        function onPointerUp(e) {
          if (!ghostEl || !draggingEl) return;
          orderBox.insertBefore(draggingEl, placeholder);
          draggingEl.style.opacity = "";
          draggingEl.style.position = "";
          draggingEl.style.pointerEvents = "";
          draggingEl.style.top = "";
          draggingEl.style.left = "";
          draggingEl.style.width = "";
          placeholder.remove();
          ghostEl.remove();
          ghostEl = null;
          window.removeEventListener("pointermove", onPointerMove);
          window.removeEventListener("pointerup", onPointerUp);
          const ids = Array.from(orderBox.querySelectorAll(".order-item")).map(
            (n) => n.dataset.id
          );
          state.answers[i].selected = ids;
          state.answers[i].savedOrder = ids;
          draggingEl = null;
          pointerId = null;
        }
        orderBox.querySelectorAll(".order-item").forEach((it) => {
          it.addEventListener("pointerdown", onPointerDown);
        });
      } else {
        const correct = q.correctOrder;
        const items = orderBox.querySelectorAll(".order-item");
        items.forEach((it, idx) => {
          const id = it.dataset.id;
          if (id === correct[idx]) {
            it.classList.add("correct");
          } else {
            it.classList.add("incorrect");
          }
          it.classList.add("disabled");
        });
        if (state.answers[i].orderAnswerText) {
          const txt = document.createElement("div");
          txt.className = "order-answer-text";
          txt.textContent = state.answers[i].orderAnswerText;
          questionArea.appendChild(txt);
        }
      }
    }
    if (state.answers[i].checked) btnSkip.style.display = "none";
  }
  function getDragAfterElement(container, y) {
    const draggableElements = [
      ...container.querySelectorAll(".order-item:not(.dragging)"),
    ];
    return draggableElements.reduce(
      (closest, child) => {
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height / 2;
        if (offset < 0 && offset > closest.offset)
          return { offset: offset, element: child };
        else return closest;
      },
      { offset: Number.NEGATIVE_INFINITY }
    ).element;
  }
  function shuffleArray(arr) {
    const a = Array.from(arr);
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }
  function onBack() {
    if (state.currentIndex === 0) return;
    state.currentIndex--;
    renderCurrent();
  }

  function onSkip() {
    const i = state.currentIndex;
    if (!state.answers[i].checked) {
      state.answers[i].skipped = true;
    }
    if (state.currentIndex < QUESTIONS.length - 1) state.currentIndex++;
    renderCurrent();
  }
  function onCheck() {
    const i = state.currentIndex;
    const q = QUESTIONS[i];
    state.checkedAttempts[i] = (state.checkedAttempts[i] || 0) + 1;
    const attempts = state.checkedAttempts[i];
    const selected = state.answers[i].selected || [];
    const isEmpty = selected.length === 0;
    if (isEmpty) {
      if (attempts === 1) {
        showWarning(
          "При повторном нажатии кнопки «Проверить» вопрос будет отмечен как <strong>неправильный</strong>!",
          () => {}
        );
        return;
      } else {
        state.answers[i].checked = true;
        state.answers[i].correct = false;
        state.answers[i].selected = [];
        renderAfterCheck(i, { showOnlyCorrect: true });
        return;
      }
    }
    let isCorrect = false;
    if (q.type === "single") {
      const chosen = selected[0];
      const opt = q.options.find((x) => x.id === chosen);
      isCorrect = !!opt && !!opt.correct;
    } else if (q.type === "multiple" || q.type === "image-multiple") {
      const correctSet = q.options
        .filter((o) => o.correct)
        .map((o) => o.id)
        .sort();
      const selSet = Array.from(new Set(selected)).sort();
      isCorrect = JSON.stringify(correctSet) === JSON.stringify(selSet);
    } else if (q.type === "order") {
      isCorrect = JSON.stringify(selected) === JSON.stringify(q.correctOrder);
      state.answers[i].savedOrder = Array.from(selected);
      if (!isCorrect) {
        state.answers[i].orderAnswerText = q.correctText;
      } else {
        state.answers[i].orderAnswerText = null;
      }
    }
    state.answers[i].checked = true;
    state.answers[i].correct = !!isCorrect;
    state.answers[i].skipped = false;
    renderAfterCheck(i);
    if (state.current === questions.length - 1 && isCorrect !== null) {
      state.finished = true;
      renderResultScreen();
      return;
    }
  }
  function renderAfterCheck(index, opts = {}) {
    const q = QUESTIONS[index];
    const showOnlyCorrect = !!opts.showOnlyCorrect;
    if (
      showOnlyCorrect &&
      (q.type === "single" ||
        q.type === "multiple" ||
        q.type === "image-multiple")
    ) {
      state.answers[index].selected = [];
      state.answers[index].checked = true;
    }
    btnSkip.style.display = "none";
    renderCurrent();
  }
  function onNext() {
    const i = state.currentIndex;
    if (i === QUESTIONS.length - 1 && state.answers[i].checked) {
      const skippedExist = state.answers.some((a) => !a.checked && a.skipped);
      if (skippedExist && !state.forcedCountSkipped) {
        state.forcedCountSkipped = true;
        showWarning(
          "При повторном нажатии кнопки «Показать результаты» пропущенные вопросы будут отмечены как <strong>неправильные</strong>!",
          () => {}
        );
        return;
      }
      showResults();
      return;
    }
    if (state.currentIndex < QUESTIONS.length - 1) {
      state.currentIndex++;
      renderCurrent();
    }
  }
  function showResults() {
    let score = 0;
    for (let i = 0; i < QUESTIONS.length; i++) {
      if (state.answers[i].checked && state.answers[i].correct) score++;
    }
    state.finished = true;
    let text = "";
    let resultType = "bad";
    const articleLink =
      '<a href="../../Sources/Article/Article.html" class="result-link">статье</a>';
    if (score <= 2) {
      text = `Ещё не всё потеряно! Вам следует подробнее ознакомиться с темой фишинга в нашей ${articleLink}! Тогда вы сможете быть уверены в том, что не попадётесь на уловки мошенников!`;
      resultType = "bad";
    } else if (score <= 5) {
      text = `Вы неплохо разбираетесь в теме фишинга, однако вам всё же стоит побольше узнать о данном виде мошенничества! Подробнее о данной теме вы можете узнать в нашей ${articleLink}!`;
      resultType = "mid";
    } else {
      text = `Отлично! Мы видим, что вы прекрасно разобрались в теме фишинга! Теперь вы можете быть уверены, что не попадётесь на уловки киберпреступников и сможете распознать мошенничество!`;
      resultType = "good";
    }
    questionArea.innerHTML = `
      <div class="results results--${resultType}">
        <div class="result-head">Результаты теста</div>
        <div class="result-score">${score} / ${QUESTIONS.length}</div>
        <div class="results-illustration">
          ${RESULT_SVGS[resultType]}
        </div>
        <div class="result-text">${text}</div>
        <div style="display:flex;gap:8px;justify-content:center">
          <button class="btn ghost" id="retakeBtn">Пройти заново</button>
        </div>
      </div>
    `;
    document.querySelector(".controls").style.display = "none";
    document.getElementById("retakeBtn").addEventListener("click", () => {
      resetTest();
      renderCurrent();
      document.querySelector(".controls").style.display = "";
    });
  }
  function resetTest() {
    randomizeQuestions();
    orderAnswerText: null;
    state.currentIndex = 0;
    state.forcedCountSkipped = false;
    state.finished = false;
    state.checkedAttempts = Array(QUESTIONS.length).fill(0);
    state.answers = state.answers.map((a, idx) => ({
      selected: [],
      checked: false,
      skipped: false,
      correct: false,
      savedOrder: null,
    }));
  }
  function showWarning(message, onClose, opts = {}) {
    warnRoot.innerHTML = `
    <div class="warn-modal" id="warnModal">
      <div class="overlay" style="position:absolute;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,0.35)"></div>
      <div class="warn-card">
        <div class="warn-card-text">Внимание</div>
        <div class="warn-card-lead">${message}</div>
        <div class="warn-actions" style="justify-content:center">
          <button class="btn primary" id="warnCancel">ОК</button>
        </div>
      </div>
    </div>
  `;
    warnRoot.style.display = "";
    const modal = document.getElementById("warnModal");
    const cancel = document.getElementById("warnCancel");
    const confirm = document.getElementById("warnConfirm");

    cancel.addEventListener("click", () => {
      warnRoot.style.display = "none";
      warnRoot.innerHTML = "";
      if (onClose) onClose(false);
    });
  }
  window.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modalRoot.style.display === "block") {
      closeTest();
    }
  });
  window.addEventListener("load", () => {
    randomizeQuestions();
    resetTest();
  });
  renderCurrent();
});

let currentScroll = window.scrollY;
let targetScroll = currentScroll;
let isScrolling = false;
window.addEventListener(
  "wheel",
  (e) => {
    if (e.target.closest(".modal")) return;
    e.preventDefault();
    targetScroll += e.deltaY;
    targetScroll = Math.max(
      0,
      Math.min(
        targetScroll,
        document.documentElement.scrollHeight - window.innerHeight
      )
    );
    if (!isScrolling) smoothScroll();
  },
  { passive: false }
);
window.addEventListener("scroll", () => {
  if (!isScrolling) {
    currentScroll = window.scrollY;
    targetScroll = window.scrollY;
  }
});
function smoothScroll() {
  isScrolling = true;
  currentScroll += (targetScroll - currentScroll) * 0.05;
  window.scrollTo(0, currentScroll);

  if (Math.abs(targetScroll - currentScroll) > 0.5) {
    requestAnimationFrame(smoothScroll);
  } else {
    isScrolling = false;
  }
}

let scrollPosition = 0;
function lockScroll() {
  scrollPosition = window.scrollY;
  document.body.style.position = "fixed";
  document.body.style.top = `-${scrollPosition}px`;
  document.body.style.width = "100%";
}
function unlockScroll() {
  document.body.style.position = "";
  document.body.style.top = "";
  document.body.style.width = "";
  window.scrollTo(0, scrollPosition);
}